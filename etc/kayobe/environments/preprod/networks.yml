---
# Kayobe network configuration.

###############################################################################
# Network role to network mappings.

# Name of the network used for admin access to the overcloud
admin_oc_net_name: admin_oc_net

# Name of the network used by the seed to manage the bare metal overcloud
# hosts via their out-of-band management controllers.
#oob_oc_net_name:

# Name of the network used by the seed to provision the bare metal overcloud
# hosts.
#provision_oc_net_name:

# Name of the network used by the overcloud hosts to manage the bare metal
# compute hosts via their out-of-band management controllers.
oob_wl_net_name: oob_oc_net

# Name of the network used by the overcloud hosts to provision the bare metal
# workload hosts.
provision_wl_net_name: provision_wl_net

# Name of the network used to expose the internal OpenStack API endpoints.
#internal_net_name:

# List of names of networks used to provide external network access via
# Neutron.
# Deprecated name: external_net_name
# If external_net_name is defined, external_net_names will default to a list
# containing one item, external_net_name.
external_net_names:
  - public_net

# Name of the network used to expose the public OpenStack API endpoints.
public_net_name: public_net

# Name of the network used by Neutron to carry tenant overlay network traffic.
tunnel_net_name: tunnel_net

# Name of the network used to carry storage data traffic.
#storage_net_name:

# Name of the network used to carry storage management traffic.
#storage_mgmt_net_name:

# Name of the network used to carry ceph storage data traffic.
#ceph_storage_net_name:

# Name of the network used to carry ceph storage management traffic.
#ceph_storage_mgmt_net_name:

# Name of the network used to carry swift storage data traffic.
#swift_storage_net_name:

# Name of the network used to carry swift storage replication traffic.
#swift_storage_replication_net_name:

# Name of the network used to perform hardware introspection on the bare metal
# workload hosts.
inspection_net_name: inspection_net

# Name of the network used to perform cleaning on the bare metal workload
# hosts
cleaning_net_name: cleaning_net

# Name of the network used for admin access to the deployment
ilab_net_name: ilab_net

# Name of the network used for Octavia amphorae sync
octavia_net_name: octavia_net

###############################################################################
# Network definitions.

# Admin network IP information.
admin_oc_net_vlan: 200
admin_oc_net_cidr: "10.{{ admin_oc_net_vlan }}.0.0/16"
# NOTE: production is using 10.200.[1,2,3].x
admin_oc_net_allocation_pool_start: "10.{{ admin_oc_net_vlan }}.4.0"
admin_oc_net_allocation_pool_end: "10.{{ admin_oc_net_vlan }}.4.255"
# Make the seed node the default route out, but on the seed default is iLab
#admin_oc_net_gateway: "10.{{ admin_oc_net_vlan }}.0.1"
#admin_oc_net_mtu:
#admin_oc_net_routes:

# Overcloud out-of-band management network IP information.
oob_oc_net_vlan: 202
oob_oc_net_cidr: "10.{{ oob_oc_net_vlan }}.0.0/16"
# NOTE: production is using 10.202.[1,2,3].x
oob_oc_net_allocation_pool_start: "10.{{ oob_oc_net_vlan }}.4.0"
oob_oc_net_allocation_pool_end: "10.{{ oob_oc_net_vlan }}.4.255"
#oob_oc_net_gateway:
#oob_oc_net_mtu:
#oob_oc_net_routes:

# Overcloud provisioning network IP information.
provision_oc_net_vlan: 201
provision_oc_net_cidr: "10.{{ provision_oc_net_vlan }}.0.0/16"
provision_oc_net_allocation_pool_start: "10.{{ provision_oc_net_vlan }}.4.0"
provision_oc_net_allocation_pool_end: "10.{{ provision_oc_net_vlan }}.4.255"
provision_oc_net_inspection_allocation_pool_start: "10.{{ provision_oc_net_vlan }}.10.0"
provision_oc_net_inspection_allocation_pool_end: "10.{{ provision_oc_net_vlan }}.12.255"
#provision_oc_net_gateway:
#provision_oc_net_routes:

# Workload provisioning network IP information.
provision_wl_net_vlan: 311
provision_wl_net_octet: 231
provision_wl_net_cidr: "10.{{ provision_wl_net_octet }}.0.0/16"
provision_wl_net_allocation_pool_start: "10.{{ provision_wl_net_octet }}.1.0"
provision_wl_net_allocation_pool_end: "10.{{ provision_wl_net_octet }}.3.255"
provision_wl_net_neutron_allocation_pool_start: "10.{{ provision_wl_net_octet }}.100.0"
provision_wl_net_neutron_allocation_pool_end: "10.{{ provision_wl_net_octet }}.101.255"
provision_wl_net_physical_network: "{{ hs_eth_physical_network }}"
provision_wl_net_neutron_gateway: "10.{{ provision_wl_net_octet }}.0.1"
provision_wl_net_mtu: 1500
provision_wl_net_routes:
  - cidr: "10.231.100.0/23"
    gateway: "10.225.0.2"

# Tunnel (i.e. vxlan) network IP information.
# tunnel_net_fqdn: tunnel.cumulus.hpc.cam.ac.uk
tunnel_net_vlan: 317
tunnel_net_octet: 237
tunnel_net_cidr: "10.{{ tunnel_net_octet }}.0.0/16"
tunnel_net_allocation_pool_start: "10.{{ tunnel_net_octet }}.1.0"
tunnel_net_allocation_pool_end: "10.{{ tunnel_net_octet }}.3.255"
#tunnel_net_gateway:
#tunnel_net_mtu:
#tunnel_net_routes:

# Internal network IP information.
#internal_net_fqdn: private.cumulus.hpc.cam.ac.uk
internal_net_vlan: 305
internal_net_octet: 225
internal_net_vip_address: "10.{{ internal_net_octet }}.0.1"
internal_net_cidr: "10.{{ internal_net_octet }}.0.0/16"
internal_net_allocation_pool_start: "10.{{ internal_net_octet }}.1.0"
internal_net_allocation_pool_end: "10.{{ internal_net_octet }}.3.255"
internal_provision_wl_gateway: "10.{{ internal_net_octet }}.0.2"
internal_cleaning_net_gateway: "10.{{ internal_net_octet }}.0.3"
internal_inspection_net_gateway: "10.{{ internal_net_octet }}.0.4"
#internal_net_gateway:
#internal_net_mtu:
#internal_net_routes:

# External network IP information.
#external_net_vip_address:
#external_net_fqdn:
external_net_vlan: 319
external_net_octet: 239
external_net_cidr: "10.{{ external_net_octet }}.0.0/16"
external_net_allocation_pool_start: "10.{{ external_net_octet }}.1.0"
external_net_allocation_pool_end: "10.{{ external_net_octet }}.3.255"
#external_net_gateway:
#external_net_mtu:
#external_net_routes:

# Public network IP information.
public_net_vlan: 111
public_net_vip_address: 128.232.224.80
public_net_fqdn: cumulus-dev.openstack.hpc.cam.ac.uk
#public_net_routes:
#  - cidr: "128.232.224.0/23"
public_net_cidr: "128.232.224.0/23"
public_net_gateway: 128.232.225.254
public_net_allocation_pool_start: 128.232.224.80
public_net_allocation_pool_end: 128.232.224.83

# Storage network IP information.
#storage_net_vlan: 306
#storage_net_cidr: "10.{{ storage_net_vlan }}.0.0/16"
#storage_net_allocation_pool_start: "10.{{ storage_net_vlan }}.1.0"
#storage_net_allocation_pool_end: "10.{{ storage_net_vlan }}.3.255"
#storage_net_gateway:
#storage_net_mtu:
#storage_net_routes:

# Storage management network IP information.
#storage_mgmt_net_vlan: 307
#storage_mgmt_net_cidr: "10.{{ storage_mgmt_net_vlan }}.0.0/16"
#storage_mgmt_net_allocation_pool_start: "10.{{ storage_mgmt_net_vlan }}.1.0"
#storage_mgmt_net_allocation_pool_end: "10.{{ storage_mgmt_net_vlan }}.3.255"
#storage_mgmt_net_gateway:
#storage_mgmt_net_mtu:
#storage_mgmt_net_routes:

# Workload cleaning network IP information.
cleaning_net_vlan: 313
cleaning_net_octet: 233
cleaning_net_cidr: "10.{{ cleaning_net_octet }}.0.0/16"
cleaning_net_allocation_pool_start: "10.{{ cleaning_net_octet }}.1.0"
cleaning_net_allocation_pool_end: "10.{{ cleaning_net_octet }}.3.255"
cleaning_net_neutron_allocation_pool_start: "10.{{ cleaning_net_octet }}.100.0"
cleaning_net_neutron_allocation_pool_end: "10.{{ cleaning_net_octet }}.101.255"
cleaning_net_physical_network: "{{ hs_eth_physical_network }}"
cleaning_net_neutron_gateway: "10.{{ cleaning_net_octet }}.0.1"
cleaning_net_mtu: 1500
cleaning_net_routes:
  - cidr: "10.233.100.0/23"
    gateway: "10.225.0.3"

# Workload inspection network IP information.
inspection_net_vlan: 310
inspection_net_octet: 230
inspection_net_cidr: "10.{{ inspection_net_octet }}.0.0/16"
inspection_net_allocation_pool_start: "10.{{ inspection_net_octet }}.1.0"
inspection_net_allocation_pool_end: "10.{{ inspection_net_octet }}.3.255"
inspection_net_inspection_allocation_pool_start: "10.{{ inspection_net_octet }}.100.0"
inspection_net_inspection_allocation_pool_end: "10.{{ inspection_net_octet }}.101.255"
inspection_net_physical_network: "{{ hs_eth_physical_network }}"
inspection_net_inspection_gateway: "10.{{ inspection_net_octet }}.0.1"
inspection_net_mtu: 1500
inspection_net_routes:
  - cidr: "10.230.100.0/23"
    gateway: "10.225.0.4"

# Cambridge ilab network IP information.
ilab_net_vlan: 60
ilab_net_cidr: "10.{{ ilab_net_vlan }}.0.0/16"
ilab_net_routes:
  # Default route onto the Cambridge ilab network
  - cidr: "0.0.0.0/0"
    gateway: "10.60.255.1"

# Octavia Load Balancer network IP information
octavia_net_vlan: 303
octavia_net_octet: 228
octavia_net_cidr: "10.{{ octavia_net_octet }}.0.0/16"
octavia_net_allocation_pool_start: "10.{{ octavia_net_octet }}.1.0"
octavia_net_allocation_pool_end: "10.{{ octavia_net_octet }}.3.255"
octavia_net_physical_network: "{{ hs_eth_physical_network }}"
octavia_net_mtu: 1500

# 1G and external stays on default mtu
provision_oc_net_mtu: 1500
public_net_mtu: 1500
admin_oc_net_mtu: 1500
oob_oc_net_mtu: 1500
ilab_net_mtu: 1500

# TODO: we want these to be 9000
br_net_mtu: 1500
bond0_net_mtu: 1500
bond0_net_bond_mode: "802.3ad"
bond0_net_bond_xmit_hash_policy: "layer3+4"
bond0_net_bond_lacp_rate: 1
bond0_net_bond_updelay: 200
bond0_net_bond_downdelay: 200

# TODO: map above to physical networks

# High Speed (25Gb) Ethernet network
hs_eth_physical_network: physnet1
# 1G Ethernet management network
# Only used for management and pxe
#mgmt_physical_network: physnet2
# Low latency (100G OPA) network
# Not currently used at all
#lln_physical_network: physnet3

###############################################################################
# Network virtual patch link configuration.

# Suffix for Open vSwitch bridge names.
#network_bridge_suffix_ovs:

# Prefix for virtual patch interface names.
#network_patch_prefix:

# Suffix for virtual patch link interface names when connected towards the
# physical interface.
#network_patch_suffix_phy:

# Suffix for virtual patch link interface names when connected towards the
# OVS bridge.
#network_patch_suffix_ovs:

###############################################################################
# Network routing table configuration.

# List of IP routing tables. Each item should be a dict containing 'id' and
# 'name' items. These tables will be added to /etc/iproute2/rt_tables.
#network_route_tables:

###############################################################################
# Dummy variable to allow Ansible to accept this file.
workaround_ansible_issue_8743: yes
