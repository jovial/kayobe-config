---
# Add extra Kolla global configuration here.

# Although Kolla-Ansible provides full support for Fernet tokens, it still
# defaults to UUID.  This setting overrides K-A and brings it in-line with
# Keystone's default.
#
keystone_token_provider: 'fernet'

# Tell kolla to use the extra volume in this location
nova_instance_datadir_volume: '/var/lib/nova'

# Ceph integration, without nova having rbd backend
cinder_backend_ceph: "no"

# Make glance use a file backend
glance_backend_swift: "no"
glance_file_backend: "yes"

# Enable CADF notifications in Keystone
enable_cadf_notifications: "yes"

# add route to ceph-rgw group in haproxy
enable_ceph_rgw_external: "no"

# opt into new docker packages
docker_legacy_packages: False

# add ceph exporter:
enable_prometheus_external_ceph_mgr_exporter: "no"

# Support manging Jira tickets via Prometheus Alertmanager
enable_prometheus_jiralert: "yes"
prometheus_jiralert_api_url: 'https://stackhpc.atlassian.net'
prometheus_jiralert_project: 'SO'
prometheus_jiralert_user: 'doug@stackhpc.com'
prometheus_jiralert_default_receiver_name: 'default'

# Projects to extracts metrics from with cASO
#caso_projects:
#  - iris
#  - iris-euclid
caso_messengers:
  - caso.messenger.logstash.LogstashMessenger
  - caso.messenger.ssm.SSMMessengerV04
caso_site_name: "UK-CAM-CUMULUS"

# Designate (DNSaaS) configuration
designate_backend: "bind9"
designate_ns_record: "cpu-e-1041.iris.staging.cumulus.local"

# Container image tags.
# These should be allowed to change independently, as services are updated.
barbican_tag: 9.0.1.1
bifrost_tag: 9.0.1.1
caso_tag: 9.0.1.1
cron_tag: 9.0.1.1
ceph_tag: 9.0.1.1
cinder_tag: 9.0.1.1
chrony_tag: 9.0.1.1
designate_tag: 9.0.1.1
elasticsearch_tag: 9.0.1.1
elasticsearch_curator_tag: 9.3.1.1-1
fluentd_tag: 9.0.1.1
glance_tag: 9.0.1.1
grafana_tag: 9.0.1.1
haproxy_tag: 9.0.1.1
heat_tag: 9.0.1.1
horizon_tag: 9.0.1.1
influxdb_tag: 9.0.1.1
ironic_tag: 9.0.1.1
iscsid_tag: 9.0.1.1
kafka_tag: 9.0.1.1
keepalived_tag: 9.0.1.1
keystone_tag: 9.0.1.1
kibana_tag: 9.0.1.1
kolla_toolbox_tag: 9.0.1.1
logstash_tag: 9.0.1.1
octavia_tag: 9.0.1.1
magnum_tag: 9.3.1.1-1
manila_tag: 9.0.1.1
mariadb_tag: 9.0.1.1
memcached_tag: 9.0.1.1
monasca_tag: 9.0.1.1
monasca_notification_tag: 9.0.1.1
monasca_persister_tag: 9.0.1.1
neutron_tag: 9.0.1.1
nova_tag: 9.0.1.1
openvswitch_tag: 9.0.1.1
prometheus_tag: 9.0.1.1
prometheus_server_tag: 9.0.1.1
prometheus_mtail_tag: 9.0.1.1
prometheus_elasticsearch_exporter_tag: 9.0.1.1
prometheus_libvirt_exporter_tag: 9.0.1.1
prometheus_jiralert_tag: 9.0.1.1
rabbitmq_tag: 9.0.1.1
skydive_tag: 9.0.1.1
storm_tag: 9.0.1.1
zookeeper_tag: 9.0.1.1

# Default size causes ES to fall over very easily
es_heap_size: "24g"
# Look after elasticserach indexes, as required
enable_elasticsearch_curator: true
# Close index after 30 days
elasticsearch_curator_soft_retention_period_days: 30
# Hard delete index after around 3 years
elasticsearch_curator_hard_retention_period_days: 1100

# Takes longer than the default 10 seconds
prometheus_openstack_exporter_timeout: 15s

# Increase the default prometheus retention period
prometheus_cmdline_extras: '--storage.tsdb.retention.time=90d --storage.tsdb.retention.size=50GB'

# Check keystone and horizon are up, and cert is valid
prometheus_blackbox_exporter_endpoints:
  - "https://{{ kolla_external_fqdn }}/auth/login/"
  - "https://{{ kolla_external_fqdn }}:5000/v3"

# Reduce the kolla-ansible token expiry default from one day to one hour
fernet_token_expiry: 3600
